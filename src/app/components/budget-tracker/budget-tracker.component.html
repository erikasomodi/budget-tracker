<div class="container-md pt-3">
  <form [formGroup]="budgetForm">
    <div class="row">
      <div class="col-md-9 col-xl-6 mx-auto">
        <div class="text-start mt-3 mb-5">
          <h2>Welcome {{ user.name }}!</h2>
        </div>
        <div class="mt-3">
          <h5 class="text-warning-emphasis">Explore Your finances:</h5>
        </div>
        <div class="d-flex align-items-center mb-4">
          <div class="">
            <app-button-switcher
              [view]="'transactions'"
              label="Budget"
              [currentView]="currentView"
              (viewChange)="switchView($event)"
            ></app-button-switcher>
          </div>
          <div class="">
            <app-button-switcher
              [view]="'expenses'"
              label="Expenses"
              [currentView]="currentView"
              (viewChange)="switchView($event)"
            ></app-button-switcher>
          </div>
          <div class="">
            <app-button-switcher
              [view]="'incomes'"
              label="Incomes"
              [currentView]="currentView"
              (viewChange)="switchView($event)"
            ></app-button-switcher>
          </div>
          <div>
            <app-input (search)="budgetSearch($event)"></app-input>
          </div>
        </div>
        <div class="pt-4 my-3">
          <div class="position-relative text-center">
            <ng-container *ngIf="currentView === 'transactions'">
              <span
                class="text-warning-emphasis mb-0 position-absolute start-50 top-0 translate-middle pb-3"
                >Total balance:</span
              >
            </ng-container>
            <h1 class="fw-bold text-white mb-0">
              {{ currentSum | number }} Ft
            </h1>
          </div>
        </div>

        <ul class="list-group">
          <!-- Költségek  -->
          <ng-container *ngIf="currentView === 'expenses'">
            <li
              *ngFor="let expense of filteredExpenses"
              class="list-group-item"
            >
              <div class="row">
                <div class="col-md-4 text-start align-items-baseline">
                  <fa-icon
                    *ngIf="expense.icon"
                    [icon]="expense.icon"
                    class="me-3"
                  ></fa-icon>
                  <span>{{ expense.transactionName }}</span>
                </div>
                <div class="col-md-3 text-end align-items-baseline">
                  <strong>{{ expense.transactionAmount | number }} Ft</strong>
                </div>
                <div class="col-md-3 text-end align-items-baseline">
                  <span>{{ expense.transactionDate }}</span>
                </div>
              </div>
            </li>
          </ng-container>

          <!-- Bevételek  -->
          <ng-container *ngIf="currentView === 'incomes'">
            <li
              *ngFor="let income of filteredIncomes"
              class="list-group-item"
            >
              <div class="row">
                <div class="col-md-4 text-start align-items-baseline">
                  <fa-icon
                    *ngIf="income.icon"
                    [icon]="income.icon"
                    class="me-3"
                  ></fa-icon>
                  <span>{{ income.transactionName }}</span>
                </div>
                <div class="col-md-3 text-end align-items-baseline">
                  <strong>{{ income.transactionAmount | number }} Ft</strong>
                </div>
                <div class="col-md-3 text-end align-items-baseline">
                  <span>{{ income.transactionDate }}</span>
                </div>
              </div>
            </li>
          </ng-container>

          <!-- Költségvetés  -->
          <ng-container *ngIf="currentView === 'transactions'">
            <li
              *ngFor="let transaction of filteredTransactions"
              class="list-group-item"
              [ngClass]="{
                '': transaction.transactionAmount > 0,
                ' list-group-item-warning': transaction.transactionAmount < 0
              }"
            >
              <div class="row">
                <div class="col-md-4 text-start align-items-baseline">
                  <fa-icon
                    *ngIf="transaction.icon"
                    [icon]="transaction.icon"
                    class="me-3"
                  ></fa-icon>
                  <span>{{ transaction.transactionName }}</span>
                </div>
                <div class="col-md-3 text-end align-items-baseline">
                  <strong
                    >{{ transaction.transactionAmount | number }} Ft</strong
                  >
                </div>
                <div class="col-md-3 text-end align-items-baseline">
                  <span>{{ transaction.transactionDate }}</span>
                </div>
                <div class="col-md-2 text-end align-items-baseline">
                  <button class="btn btn-sm btn-outline-warning me-2">
                    <fa-icon [icon]="faMarker"></fa-icon>
                  </button>
                  <button class="btn btn-sm btn-outline-danger">
                    <fa-icon [icon]="faTrash"></fa-icon>
                  </button>
                </div>
              </div>
            </li>
          </ng-container>
        </ul>
      </div>
    </div>
  </form>
</div>
